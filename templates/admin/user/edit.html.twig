{% extends 'admin/base.html.twig' %}

{% block title %}Modifier l'utilisateur{% endblock %}

{% block body %}

{% include 'admin/_menu.html.twig' %}

<section class="is-hero-bar">
    <div class="flex flex-col items-center justify-between space-y-6 md:flex-row md:space-y-0">
        <h1 class="title">
            Modifier l'utilisateur
        </h1>
    </div>
</section>

<section class="section main-section">
    <div class="card">
        <div class="card-content">
            <!-- Formulaire de mise à jour intégré directement dans cette page -->
            <form method="post">
                {{ form_start(form) }}

                <div class="field">
                    {{ form_label(form.email, 'Email', { 'label_attr': { 'class': 'label' } }) }}
                    <div class="control">
                        {{ form_widget(form.email, { 'attr': { 'class': 'input' } }) }}
                    </div>
                </div>

                <div class="field">
                    {{ form_label(form.password, 'Mot de passe', { 'label_attr': { 'class': 'label' } }) }}
                    <div class="control">
                        {{ form_widget(form.password, { 'attr': { 'class': 'input' } }) }}
                    </div>
                </div>

                <div class="field">
                    {{ form_label(form.firstname, 'Prénom', { 'label_attr': { 'class': 'label' } }) }}
                    <div class="control">
                        {{ form_widget(form.firstname, { 'attr': { 'class': 'input' } }) }}
                    </div>
                </div>

                <div class="field">
                    {{ form_label(form.lastname, 'Nom', { 'label_attr': { 'class': 'label' } }) }}
                    <div class="control">
                        {{ form_widget(form.lastname, { 'attr': { 'class': 'input' } }) }}
                    </div>
                </div>

                <div class="field">
                    {{ form_label(form.roles, 'Rôles', { 'label_attr': { 'class': 'label' } }) }}
                    <div class="control">
                        {{ form_widget(form.roles, { 'attr': { 'class': 'select' } }) }}
                    </div>
                </div>

                <div class="field">
                    <div class="control">
                        <button class="button green">{{ button_label|default('Mettre à jour') }}</button>
                    </div>
                </div>

                {{ form_end(form) }}
            </form>
        </div>
    </div>

    <div class="back-link">
        <a href="{{ path('app_user_index') }}">Retour à la liste</a>
    </div>

    <!-- Formulaire de suppression -->
    <div class="card">
        <div class="card-content">
            <form method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
                <button class="button red" type="submit">
                    Supprimer cet utilisateur
                </button>
            </form>
        </div>
    </div>
</section>

{% endblock %}
